kind: bluperint 
spec_version: 2-preview
description: demo of Task grain


inputs:
  filePath:
    type: string
    display-style: normal
    default: "0.4.3"
    description: "path to file to download"

  myVal:
    type: string
    display-style: normal
    default: "jp"
    description: "stam value"

  mySecondVal:
    type: string
    display-style: normal
    default: "jerusalem"
    description: "test value"


# values that starts with '{' for liquid template must be encosed with quotes so YAML won't consider them as dict
outputs:
  DB_Hostname:
    value: '{{ .grains.configureService.deploy.commands.security_check.output }}'


env-var:
  - name: VAR_NAME1
    value: value1
  - name: VAR_NAME2
    value: '{{ .inputs.mySecondVal }}'


grains:

  configureService:
    kind: shell
    spec:
      host:
        name: vcenter
        image: http://.../
      activities:
        deploy:
          commands: 
            - 'wget {{ .inputs.filePath }}'
            - name: security_check
              command: sync check  MY_CUSTOM_ENV_VAR=123 ...

        destroy:
          commands:
            - 'echo {{ .inputs.myVal }}'
