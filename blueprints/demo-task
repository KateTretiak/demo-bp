spec_version: 2-preview
description: demo of Task grain


inputs:
  version:
    type: string
    display-style: normal
    default: "0.4.3"
    description: "Version of the robotShop micorservices application"


# values that starts with '{' for liquid template must be encosed with quotes so YAML won't consider them as dict
outputs:
  DB_Hostname:
    value: '{{ .grains.configureService.outputs.hostname }}'


grains:

  configureService:
    kind: shell
    spec:
      container: 
        image: http://.../
      host:
        compute-service: kubernetes-testing1
      files: 
        - path: '~/script.sh'
          source: http://github.com/.../script.sh
      activities:
        deploy:
          commands: 
            - '~/script.sh create arg={{ .inputs.arg }}'
            - name: var-output
              command: echo $ENV_VAR
            - name: file-output
              command: cat ~/file-name
            - name: command-output
              command: sudo apt-get update

        destroy:
          commands:
            - ~/script.sh destroy
